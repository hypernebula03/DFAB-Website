<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css"
      integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
  
    <!--Bootstrap-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
      integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  
  </head>
  <!--navbar-->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
    aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNavDropdown">
    <div class="navbar-nav">
      <a class="nav-item nav-link" href="index.html">Home</a>
      <a class="nav-item nav-link" href="Introduction.html">Introduction</a>
      <a class="nav-item nav-link" href="safety.html">Fablab Safety</a>
      <a class="nav-item nav-link" href="software.html">Software</a>
      <a class="nav-item nav-link active" href="finalproject.html">Final Project</a>
      <div class="dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false">
          Assignment
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
          <a class="dropdown-item" href="cad.html">Computer Aided Design</a>
          <a class="dropdown-item" href="3d.html">3D Printing</a>
          <a class="dropdown-item" href="laser.html">Laser Cutting</a>
          <a class="dropdown-item" href="embedprogramming.html">Embedded Programming</a>
        </div>
      </div>
    </div>
</nav>     
<body>
  <p>The Final Project in this module is a test to apply what we have learnt over the course of this academic semester. <br>
  <p> 
    <ul><b>The project can be about anything, provided it met the following criteria:</b>
      <li>A 3D printed item must be present.</li>
      <li>A laser cut item must be present.</li>
      <li>Arduino programming must be included, as well as some wiring of electronics.</li>
    </ul>
    All of the items must play a key role in the project. (e.g. the 3D printed item cannot be there as a placeholder)<br>
    In addition, we needed to make a 1-minute video about the project, an A4 sized poster about it as well as document the processes
    made over the course of this project.<br>
  </p>
  <p> 
  For my Final Project, I decided to try something different. I decided to group up with two of my classmates, <a href="https://justeenie.github.io/home.html">Justin</a> and <a href="https://ngliangg.github.io/DFABWebsite/">Guo Liang</a> to make one big project.<br>
  We decided to make a coin sorter that could count and sort out the newest generation of Singapore coins.<br>
</p>
  <p>
  Before we could start on the project, we had to define what each member had to do. I decided to focus on the input system of the coin sorter.<br>

  <h1>Prototyping</h1>
  <p>To figure out how to make a proper coin sorter, we needed to figure out potential problems we might need to tackle.<br>
  The base idea was to create a sloped track with slots that fit a certain coin size in ascending size from 5 cents to 1 dollar. The coins
  would roll down and fall into the assigned track based on the smallest slot that fits the coin. There would be a infared sensor detecting
  the motion of a coin falling into the system, thus counting the number of coins sorted in this coin sorter system.<br>
  One such problem was ensuring the coins fall one at a time. This would ensure that the coins do not overlap and fall into the wrong section, as well as giving the counting
  system some time in case the system could only scan one type of coin at a time.<br>
  Next, I had to figure out how the wheel was going to be powered. I initially went with a DC motor as it was the only motor I was initially 
  given to work with. However, as I would soon find out, the motor was not a good fit. <br>
</p>
<h1>CAD (3D Modelling)</h1>
<p>To model out the wheel, a few things must be considered.<br>
  Firstly, it has to be slightly thicker than a 5 cent coin. It had to be thin enough to be 3D printable, while ensuring 
  the wheel was not thick enough that any combination of coins could stack and get caught in the wheel simultaneously.<br>
  I decided to make the wheel about 10cm in diameter to make sure the wheel was large enough to make the holes big enough to scoop
  the coins.<br>
  Holes were added to allow the coins to sit inside the hole.<br>
  <img src="./images/final project/wheel sketch" width="40%" /><br>
  Afterwards, I made a hole in the center of the wheel to accomodate the motor which will be powering the wheel.
  Finally, I extruded the wheel to the desired thickness of 1.25mm, which is just slightly thicker than a 5 cent coin. For reference, a 5 cent coin is 1.22mm thick, <a href="https://www.mas.gov.sg/currency/Singapores-Circulation-Currency-Coins">according to the Monetary Authority of Singapore.</a>
  A notch was created to improve the stability of the wheel.<br>
  <img src="./images/final project/extrude" width="40%" /><br>
  Arduino Case Supports:
  To ensure the Arduino is well anchored into the sorter, I had to make a support box for it. For this model, I decided to reference 
  an old model I had created in this module. I made a copy of the old laser cut box and removed the lid plus hinge systems.<br>
  With the base and sides left, I edited the parametrics to ensure the Arduino UNO can fit. The following changes were made:
  <ul>
    <li>Changed thickness to 5mm</li>
    <li>Adjusted length, with and height.</li>
    <li>Added 2 holes at the side for USB input and battery power.</li>
  </ul><br>
  <img src="./images/final project/hole sketch" width="40%"/>
  <img src="./images/final project/hole cut" width="40%"/><br>

</p>
<h1>Model Creation</h1>
<p>3D Printing:<br>
  To create the coin wheel, I decided to lay it flat on the suface of the 3D printing bed to make printing easier. That way, the 3D printer layers 
  would be printing the thickness of the wheel, rather than the diameter of the wheel. Other settings were not changed from the last time I used Cura to 3D print
  my knight chess piece.<br>
  <img src="./images/final project/cura" width="40%"/><br>
  <video width="80%" height="80%" controls>
    <source src="./images/final project/wheel print.mp4" type="video/mp4">
  </video><br>
  Laser Cutting:<br>
  Initially, I made the box with just one hole for the USB input. However, after the first cut, I realised that not only would the Arduino not fit, 
  but also the hole would be necessary as a power source. Thus, I went to make the necessary changes and cut it a second time. <br>
  I also had a box designed for my DC motor to power the wheel, but it had to be abandoned after I realised the motor would not be a good 
  fit (the speed was too fast). <br>
  <video width="80%" height="80%" controls>
    <source src="./images/final project/motor fail.mp4" type="video/mp4">
  </video><br>
  Thus, to take its place was a BYJ-48 Stepper Motor. It rotates much slower than the original DC motor I had.<br>
  In its place two supports will be 3D printed to anchor the new stepper motor to the coin pouch done by Guo Liang.<br>

  Wiring:<br>
  Wiring was not too big of an issue since the only wiring I needed to do was to connect the stepper motor to the breadboard. No resistors
  were needed, thus it could be connected straight to 5V and GND.

  Arduino Programming:<br>
  I decided to <a href="https://www.instructables.com/BYJ48-Stepper-Motor/">use a reference code made by Mohannad Rawashdeh</a> to assist me. The code linked is meant to be used as a bi-directional motor
  which will count down a fixed number of steps, stops for a second and changes direction.<br>
  Variable Definition:<br>
  <img src="./images/final project/variable definition" width="40%" /><br>
  Pin Inputs:<br>
  <img src="./images/final project/pin input" width="40%" /><br>
  Later on I decided to change the input pins from 8 - 11 to pins 9 - 12 to accomodate other input pins used by Justin and Guo Liang's section of this project.<br>
  This section of the code creates a loop that forces the motor to keep going.<br>
  <img src="./images/final project/motor start" width="40%" /><br>
  This section of code determines the direction the motor goes. In this case it goes clockwise.<br>
  <img src="./images/final project/motor direction" width="40%" /><br>
  <ul> <b> To ensure the motor works the way I want it to, I removed a few things:</b>
    <li>if(Direction==0){ Steps--; } Removed to ensure the motor does not change direction under the SetDirection function of the code.</li>
    <li> This section of the code was removed as no delay or reversing direction is needed.<br> "Serial.println(time);<br>
      Serial.println("Wait...!");<br>
      delay(2000);<br>
      Direction=!Direction;<br>
      steps_left=4095;"<br></li>
    <li>I also removed "while(steps_left>0)" during integration with Justin and Guo Liang's code to ensure the code would not be stuck running the void loop function.</li>
  </ul>
  One thing to note is that since the stepper motor isn't that fast to begin with, there is no need to set its speed.<br>
  Below is how the stepper motor would work:<br>
  <video width="80%" height="80%" controls>
    <source src="./images/final project/stepper motor video.mp4" type="video/mp4">
  </video><br>
</p>
<h1>Assembly, Integration and Troubleshooting</h1>
  <p>Since this is a group project, this section would be by far the hardest part out of all.
    Integration is where problems would arise and where troubleshooting gets very tiring.<br>
    After the coin pouch was printed, we realised that there were a few problems.<br>
    First was that the pouch was extremely tight, so much that the stepper motor lacked the torque to power the wheel smoothly.
    Thus, the wheel had to be sanded quite a bit and the pouch needed some filing to ensure no bumps in the wheel movements. <br>
    The pouch was also not angled steep enough to make sure all coins were positioned vertically for the wheel to scoop up. 
    Thus, it had to be re-adjusted so the pouch, wheel and motor are positioned horizontally, above the track where the coins get sorted.<br>
    Integrating the code was also another problem. While integrating the code, I had to change my input ports to pins 10, 11, 12, 13. I also had to troubleshoot
    issues such as the code only executing the stepper motor section due to it being stuck in the while loop "while(steps_left>0)".<br>
    
  </p>
<h1>Final Product</h1>
<p></p>
<h1>Reflections</h1>
  <p>In hindsight, this was a very ambitious project to do. Since the project requirements demand each member's contributions
    fulfil the project requirements, that means that group projects get exponentially harder to fit content for everyone. It also 
    did not help that all of us had other projects and exams to prepare for, further constraining the amount of time we had to work on the 
    project. Communication is very important especially in group projects as integration and troubleshooting would be a pain to do without
  proper communication. I am very thankful to Justin and Guo Liang for their valuable contributions to this project. Without them, this would not
have been such a success. </p>
  </p>
  <footer>
    <p>Copyright © Ng Chee Rui, Ethan</p>
    <img src="./images/gay3.png" width="20%" /><br>
  </footer>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
        crossorigin="anonymous"></script>
</body>
</html>       